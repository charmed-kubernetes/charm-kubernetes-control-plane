name: kubernetes-control-plane
display-name: Kubernetes Control Plane
summary: The Kubernetes control plane.
maintainers:
  - Kevin Monroe <kevin.monroe@canonical.com>
  - Mateo Florido <mateo.florido@canonical.com>
  - Adam Dyess <adam.dyess@canonical.com>
description: |
  Kubernetes is an open-source platform for deploying, scaling, and operations
  of application containers across a cluster of hosts. Kubernetes is portable
  in that it works with public, private, and hybrid clouds. Extensible through
  a pluggable infrastructure. Self healing in that it will automatically
  restart and place containers on healthy nodes if a node ever goes away.
docs: https://discourse.charmhub.io/t/kubernetes-control-plane-docs-index/6214
tags:
  - infrastructure
  - kubernetes
  - master  # wokeignore:rule=master
  - control-plane
subordinate: false
series:
  - jammy
  - focal
peers:
  peer:
    interface: kubernetes-control-plane-peer
  coordinator:
￼    # LP:2049953 needed for upgrading from < 1.29
￼    interface: coordinator
provides:
  cni:
    interface: kubernetes-cni
    scope: container
  container-runtime:
    interface: container-runtime
    scope: container
  cos-agent:
    interface: cos_agent
  kube-control:
    interface: kube-control
  tokens:
    interface: tokens
requires:
  aws:
    interface: aws-integration
    description: |
      [Deprecated] only necessary for upgrades from 1.28 and can be removed after the upgrade
      There's no need to relate if this is a fresh deployment
  certificates:
    interface: tls-certificates
  dns-provider:
    interface: kube-dns
  etcd:
    interface: etcd
  ha:
    interface: hacluster
  loadbalancer-external:
    # Indicates that the LB should be public facing. Intended for clients which
    # must reach the API server via external networks.
    interface: loadbalancer
  loadbalancer-internal:
    # Indicates that the LB should not be public and should use internal
    # networks if available. Intended for control plane and other internal use.
    interface: loadbalancer
  external-cloud-provider:
    interface: external_cloud_provider
resources:
  cni-plugins:
    type: file
    filename: cni-plugins.tar.gz
    description: CNI network plugins for Kubernetes
